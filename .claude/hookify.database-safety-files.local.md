---
name: database-safety-files
enabled: true
event: file
action: block
conditions:
  - field: file_path
    operator: regex_match
    pattern: server/database/migrations/.*\.sql$
---

â›” **BLOCKED: Manual Migration File Edit**

You attempted to manually edit a generated migration file.

**Why this is blocked:**
- Migration files are auto-generated by Drizzle
- Manual edits can corrupt the database
- Changes should be made to schema.ts instead

**Correct workflow:**

1. **DO NOT edit migration files directly**
2. **Edit `server/database/schema.ts`** instead
3. **Ask user to run `pnpm db:generate`** to regenerate migrations
4. **Commit schema + migrations together**

**Exception:** If you absolutely must edit a migration (rare), discuss with the user first.

**See the database-migration skill for the complete workflow.**
